"use strict";define(["require","exports"],function(e,t){var i=function(){function e(){this.keys=["none","reflection","refraction"];{var e="/build/img/examples/SwedishRoyalCastle/",t=".jpg",i=_.map(["px","nx","py","ny","pz","nz"],function(i){return e+i+t});THREE.ImageUtils.loadTextureCube(i,THREE.CubeRefractionMapping)}this.reflection=THREE.ImageUtils.loadTextureCube(i),this.reflection.format=THREE.RGBFormat,this.refraction=new THREE.Texture(this.reflection.image,THREE.CubeRefractionMapping),this.refraction.format=THREE.RGBFormat,this.none=null}return e}();t.EnvMapper=i;var a=function(){function e(){this.keys=["none","grass"],this.none=null,this.grass=THREE.ImageUtils.loadTexture("/build/img/examples/grasslight-thin.jpg")}return e}();t.TextureMapper=a;var n=function(){function e(){this.constants={combine:{"THREE.MultiplyOperation":THREE.MultiplyOperation,"THREE.MixOperation":THREE.MixOperation,"THREE.AddOperation":THREE.AddOperation},side:{"THREE.FrontSide":THREE.FrontSide,"THREE.BackSide":THREE.BackSide,"THREE.DoubleSide":THREE.DoubleSide},shading:{"THREE.NoShading":THREE.NoShading,"THREE.FlatShading":THREE.FlatShading,"THREE.SmoothShading":THREE.SmoothShading},colors:{"THREE.NoColors":THREE.NoColors,"THREE.FaceColors":THREE.FaceColors,"THREE.VertexColors":THREE.VertexColors},blendingMode:{"THREE.NoBlending":THREE.NoBlending,"THREE.NormalBlending":THREE.NormalBlending,"THREE.AdditiveBlending":THREE.AdditiveBlending,"THREE.SubtractiveBlending":THREE.SubtractiveBlending,"THREE.MultiplyBlending":THREE.MultiplyBlending,"THREE.CustomBlending":THREE.CustomBlending},equations:{"THREE.AddEquation":THREE.AddEquation,"THREE.SubtractEquation":THREE.SubtractEquation,"THREE.ReverseSubtractEquation":THREE.ReverseSubtractEquation},destinationFactors:{"THREE.ZeroFactor":THREE.ZeroFactor,"THREE.OneFactor":THREE.OneFactor,"THREE.SrcColorFactor":THREE.SrcColorFactor,"THREE.OneMinusSrcColorFactor":THREE.OneMinusSrcColorFactor,"THREE.SrcAlphaFactor":THREE.SrcAlphaFactor,"THREE.OneMinusSrcAlphaFactor":THREE.OneMinusSrcAlphaFactor,"THREE.DstAlphaFactor":THREE.DstAlphaFactor,"THREE.OneMinusDstAlphaFactor":THREE.OneMinusDstAlphaFactor},sourceFactors:{"THREE.DstColorFactor":THREE.DstColorFactor,"THREE.OneMinusDstColorFactor":THREE.OneMinusDstColorFactor,"THREE.SrcAlphaSaturateFactor":THREE.SrcAlphaSaturateFactor}},this.envMaps=new i,this.textureMaps=new a}return e.prototype.handleColorChange=function(e){return function(t){"string"==typeof t&&(t=t.replace("#","0x")),e.setHex(t)}},e.prototype.updateMorphs=function(e,t){return function(){e.updateMorphTargets(),t.needsUpdate=!0}},e.prototype.updateTexture=function(e,t,i){return function(a){e[t]=i[a],e.needsUpdate=!0}},e.prototype.needsUpdate=function(e,t){return function(){e.shading=+e.shading,e.vertexColors=+e.vertexColors,e.side=+e.side,e.needsUpdate=!0,t.verticesNeedUpdate=!0,t.normalsNeedUpdate=!0,t.colorsNeedUpdate=!0}},e.prototype.addPhongMaterialGui=function(e,t,i,a){var n={color:i.color.getHex(),emissive:i.emissive.getHex(),specular:i.specular.getHex(),envMaps:this.envMaps.keys,map:this.textureMaps.keys,lightMap:this.textureMaps.keys,specularMap:this.textureMaps.keys,alphaMap:this.textureMaps.keys},o=e.addFolder((t.name||"")+"MeshPhongMaterial");o.addColor(n,"color").onChange(this.handleColorChange(i.color)),o.addColor(n,"emissive").onChange(this.handleColorChange(i.emissive)),o.addColor(n,"specular").onChange(this.handleColorChange(i.specular)),o.add(i,"shininess",1,100),o.add(i,"shading",this.constants.shading).onChange(this.needsUpdate(i,a)),o.add(i,"wireframe"),o.add(i,"wireframeLinewidth",0,10),o.add(i,"vertexColors",this.constants.colors),o.add(i,"fog"),o.add(n,"envMaps",this.envMaps.keys).onChange(this.updateTexture(i,"envMap",this.envMaps)),o.add(n,"map",this.textureMaps.keys).onChange(this.updateTexture(i,"map",this.textureMaps)),o.add(n,"lightMap",this.textureMaps.keys).onChange(this.updateTexture(i,"lightMap",this.textureMaps)),o.add(n,"specularMap",this.textureMaps.keys).onChange(this.updateTexture(i,"specularMap",this.textureMaps)),o.add(n,"alphaMap",this.textureMaps.keys).onChange(this.updateTexture(i,"alphaMap",this.textureMaps))},e}();t.GuiBuilder=n}),define(["require","exports","threegui","domready"],function(e,t,i,a){var n,o;!function(e){var t=function(){function e(){var e=this;this.gui=new dat.GUI,this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer,this.light=new THREE.AmbientLight(16777215),this.otherLight=new THREE.SpotLight(16777215,1,100,2),this.renderScene=function(){e.renderer.render(e.scene,e.camera),requestAnimationFrame(e.renderScene)},this.renderer.setSize(window.innerWidth,window.innerHeight),document.getElementById("webgl-container").appendChild(this.renderer.domElement),this.otherLight.position.setZ(25),this.scene.add(this.otherLight),this.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.z=100,this.scene.add(this.camera),this.box=new THREE.Mesh(new THREE.BoxGeometry(20,20,20),new THREE.MeshPhongMaterial({ambientColor:255,specular:15})),this.box.name="Box",this.scene.add(this.box),this.addGui(),this.addLightGui(this.otherLight),this.renderScene()}return e.prototype.addObj3dProps=function(e,t,i,a){void 0===i&&(i=!0),void 0===a&&(a=!0);var n=this.gui.addFolder(t+" Rotation");n.add(e.rotation,"x").step(.05),n.add(e.rotation,"y").step(.05),n.add(e.rotation,"z").step(.05);var o=this.gui.addFolder(t+" Position");o.add(e.position,"x").step(.5),o.add(e.position,"y").step(.5),o.add(e.position,"z").step(.5),i&&n.open(),a&&o.open()},e.prototype.addLightGui=function(e){var t=this.gui.addFolder(e.name||e.type);t.addColor(e,"color"),_.has(e,"angle")&&t.add(e,"angle").step(Math.PI/12),_.has(e,"distance")&&t.add(e,"distance"),_.has(e,"intensity")&&t.add(e,"intensity")},e.prototype.addGui=function(){this.addObj3dProps(this.camera,"Camera",!1,!1),this.addObj3dProps(this.box,"Box",!1,!1),this.addObj3dProps(this.otherLight,this.otherLight.type);var e=new i.GuiBuilder;e.addPhongMaterialGui(this.gui,this.box,this.box.material,this.box.geometry)},e}();e.BoxExample=t}(o||(o={})),a(function(){n=new o.BoxExample})});